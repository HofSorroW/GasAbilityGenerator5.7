# GasAbilityGenerator Changelog

Full version history for versions prior to v4.7. For recent versions, see `CLAUDE.md`.

---

## v4.6.x and Earlier

- v4.6.1 - NPC Table Editor status bar and UX refinements. See `ClaudeContext/Handoffs/v4.6_UX_Safety_System_ProcessMap.md`.
- v4.6 - UX Safety System: Auto-save before generate, soft delete, validation gate, generation tracking, hash-based staleness detection. See `ClaudeContext/Handoffs/v4.6_UX_Safety_System_ProcessMap.md`.
- v4.5.x - Validation cache system, XLSX-only format, NPC/Dialogue editor alignment. See `ClaudeContext/Handoffs/Table_Editors_Reference.md`.
- v4.4.x - Validated Token System with preview window, Apply to Assets, Sync from Assets. See `ClaudeContext/Handoffs/Table_Editors_Reference.md`.
- v4.3 - Widget Blueprint Layout Automation: FWidgetBlueprintGenerator now supports full widget tree construction from YAML via `widget_tree` manifest section. New structs: FManifestWidgetSlotDefinition (anchors, position, size, alignment, h_align, v_align, size_rule, fill_weight, padding), FManifestWidgetNodeDefinition (id, type, name, is_variable, slot, properties, children, text, image_path, style_class), FManifestWidgetTreeDefinition (root_widget, widgets array). Supports 23 widget types: CanvasPanel, VerticalBox, HorizontalBox, Overlay, GridPanel, UniformGridPanel, WrapBox, ScrollBox, Border, SizeBox, ScaleBox, Button, CheckBox, Slider, ComboBox, EditableText, EditableTextBox, TextBlock, RichTextBlock, Image, ProgressBar, Throbber, CircularThrobber, Spacer. Three-pass construction: create widgets, build hierarchy via panel AddChild, set root. Slot configuration supports Canvas/VBox/HBox/Overlay panels with proper UCanvasPanelSlot/UVerticalBoxSlot/UHorizontalBoxSlot/UOverlaySlot population. Properties set via reflection. Upgrades WBP_ from Medium to High automation level.
- v4.0 - Quest Pipeline & CSV Dialogue: New `-dialoguecsv="..."` commandlet parameter for batch dialogue generation from Excel/CSV files. FDialogueCSVParser class parses CSV with columns: Dialogue, NodeID, Type, Speaker, Text, OptionText, Replies, Conditions, Events. Supports multiple dialogues per file (grouped by Dialogue column), automatic root node detection, NPC/Player node type resolution, reply connection validation, event/condition parsing (NE_*/NC_* format). CSV dialogues override YAML definitions with same name. Enables production-scale dialogue authoring via spreadsheets. Full v3.0 Regen/Diff Safety integration. Sample data: `ClaudeContext/DialogueData.csv`.
- v3.9.9 - POI & NPC Spawner Automation: Level actor placement for World Partition worlds. New `-level="/Game/..."` commandlet parameter loads a world for actor placement. FPOIPlacementGenerator places APOIActor instances with POITag, DisplayName, MapIcon, LinkedPOIs (A* navigation). FNPCSpawnerPlacementGenerator places ANPCSpawner actors with UNPCSpawnComponent entries, supporting NearPOI resolution and spawn parameter configuration. New manifest sections: `poi_placements:` (poi_tag, location, rotation, display_name, map_icon, linked_pois) and `npc_spawner_placements:` (name, location/near_poi, npcs array with npc_definition, spawn_params, optional_goal). Idempotency via actor label/POI tag matching. World auto-saved after new placements.
- v3.9.8 - Item Pipeline: Mesh-to-Item automation with clothing mesh support for auto-generating EI_ assets from mesh files
- v3.9.7 - Parser & Manifest Fixes: Fixed ParseMaterialFunctions multi-item parsing bug where subsection flags (bInExpressions, etc.) prevented subsequent items from being recognized. Added indent-based detection to properly identify new items regardless of subsection state. Fixed manifest BP_FatherRifleWeapon/BP_FatherSwordWeapon prefix to EI_ (RangedWeaponItem/MeleeWeaponItem are UObject data assets, not Actors). Consolidated 33 prefixed manifest sections (warden_tags:, guard_formation_goals:, etc.) into standard section names with comments. Increases parsed asset count from 151 to 155.
- v3.9.6 - Automation Gaps Implementation: (1) Quest Rewards & Questgiver - `FManifestQuestRewardDefinition` struct with Currency/XP/Items, `questgiver` (documentation field - UQuest has no Questgiver property; the actual questgiver is the NPC whose dialogue has a `start_quest` event) and `rewards` fields on quest definitions, rewards auto-created on success states using NE_GiveXP/BPE_AddCurrency/BPE_AddItemToInventory events. (2) Dialogue Quest Shortcuts - `start_quest`, `complete_quest_branch`, `fail_quest` fields on dialogue nodes auto-generate NE_BeginQuest/NE_CompleteQuestBranch/NE_FailQuest events. (3) Item Usage Properties - `bAddDefaultUseOption`, `bConsumeOnUse`, `bUsedWithOtherItem`, `UseActionText`, `bCanActivate`, `bToggleActiveOnUse`, `UseSound` for NarrativeItem configuration. (4) Weapon Attachments - `holster_attachments`/`wield_attachments` arrays with slot/socket/offset/rotation entries (logged for manual TMap setup due to complex nested structure).
- v3.9.5 - NPC Item Loadout Automation: Full loot table roll support for NPCDefinitions. New manifest properties `default_item_loadout` and `trading_item_loadout` accept arrays of loot table rolls, each containing `items` (item class + quantity), `item_collections`, `table_to_roll`, `num_rolls`, and `chance`. Maps to Narrative Pro's `TArray<FLootTableRoll>` via reflection with proper population of nested `FItemWithQuantity` and item collection arrays. Enables complete NPC inventory definition from YAML.
- v3.9.4 - Quest Blueprint Generator (UQuestBlueprint): Complete rewrite using UQuestBlueprint (same pattern as DialogueBlueprint v3.8). Works directly on QuestTemplate (auto-created by constructor). Branches now nested inside states (cleaner YAML structure). Events supported on both states and branches. Task argument resolution via reflection. Added NarrativeQuestEditor module dependency. Visual editor shows empty graph but quest functions at runtime.
- v3.9.3 - Quest State Machine Generator: FQuestGenerator now creates complete quest state machines with UQuestState nodes, UQuestBranch transitions, and UNarrativeTask instances. States support Regular/Success/Failure types. Branches connect states and contain instanced tasks (BPT_FindItem, BPT_FinishDialogue, BPT_Move, etc.). Task properties set via reflection. Full automation - no manual editor setup required for basic quest flows.
- v3.9.2 - Goal Search Paths: Added all Narrative Pro goal locations to FActivityScheduleGenerator search paths (Attacks/Goals/, DriveToDestination/, FollowCharacter/, GoToLocation/, Idle/, Interact/Goals/, Patrol/, ReturnToSpawn/).
- v3.9.1 - Schedule Behavior Helper: Added UScheduledBehavior_AddNPCGoalByClass concrete helper class allowing goal class specification via property instead of Blueprint override. FActivityScheduleGenerator now creates fully functional scheduled behaviors.
- v3.9 - NPC Pipeline (Schedules, Goals, Quests): Three new generators for comprehensive NPC content creation. FActivityScheduleGenerator creates Schedule_ assets (UNPCActivitySchedule DataAssets) with fully populated scheduled behaviors. Time format: 0-2400 where 100 = 1 hour. FGoalItemGenerator creates Goal_ assets (UNPCGoalItem Blueprints) for AI objectives with DefaultScore, GoalLifetime, RemoveOnSucceeded, SaveGoal, OwnedTags, BlockTags, RequireTags. FQuestGenerator creates Quest_ assets (UQuest Blueprints) with full state machine support. New manifest sections: activity_schedules, goal_items/goals, quests. Full v3.0 Regen/Diff Safety System integration.
- v3.8 - Dialogue Tree Generation: DialogueBlueprint (DBP_) now supports full dialogue tree creation from YAML. New manifest property `dialogue_tree` with `root` and `nodes` array. Each node supports: id, type (npc/player), speaker, text, option_text, audio, montage, duration, duration_seconds, auto_select, auto_select_if_only, skippable, directed_at, npc_replies[], player_replies[], alternative_lines[], events[], conditions[]. Events support type, runtime (Start/End/Both), and properties map. Conditions support type, not (invert), and properties map. Creates UDialogueBlueprint with proper DialogueTemplate containing UDialogueNode_NPC/UDialogueNode_Player nodes and FDialogueLine data. Full v3.0 Regen/Diff Safety System integration. Upgrades DBP_ to High automation level with full editor compatibility.
- v3.7 - NPC Auto-Create Related Assets: NPCDefinition gains auto_create_dialogue, auto_create_tagged_dialogue, and auto_create_item_loadout flags for one-manifest NPC package generation. When enabled: auto_create_dialogue creates DBP_{NPCName}Dialogue, auto_create_tagged_dialogue creates {NPCName}_TaggedDialogue, auto_create_item_loadout populates DefaultItemLoadout.ItemCollectionsToGrant with specified item collections. New manifest field default_item_loadout_collections for specifying item collections to grant. All v3.0 Regen/Diff Safety System hash safeguards included via updated ComputeHash().
- v3.6 - NPCDefinition ActivitySchedules: NPCDefinition (NPC_) gains ActivitySchedules array support (TArray<TSoftObjectPtr<UNPCActivitySchedule>>) for defining NPC daily routines. Also adds YAML list parsing support for DefaultOwnedTags, DefaultFactions, and ActivitySchedules arrays in npc_definitions.
- v3.5 - CharacterDefinition & DialogueBlueprint Enhancement: CharacterDefinition (CD_) gains full property support - DefaultOwnedTags/DefaultFactions now properly populate FGameplayTagContainer from arrays, added DefaultAppearance (TSoftObjectPtr), TriggerSets (array via FScriptArrayHelper reflection), AbilityConfiguration (FObjectProperty). DialogueBlueprint gains 3 additional UDialogue properties - DefaultHeadBoneName (FName), DialogueBlendOutTime (float), bAdjustPlayerTransform (bool). Both CD_ and DBP_ upgraded to High automation level.

## v3.4 and Earlier

- v3.4 - WeaponItem Property Support: EquippableItem generator now supports full WeaponItem/MeleeWeaponItem/RangedWeaponItem property chain when using those parent classes. New properties: WeaponVisualClass (TSoftClassPtr), WeaponHand (EWeaponHandRule enum), WeaponAbilities/MainhandAbilities/OffhandAbilities arrays (TSubclassOf<UGameplayAbility>), bPawnFollowsControlRotation, bPawnOrientsRotationToMovement, AttackDamage, HeavyAttackDamageMultiplier, bAllowManualReload, RequiredAmmo, bBotsConsumeAmmo, BotAttackRange, ClipSize, AimFOVPct, BaseSpreadDegrees, MaxSpreadDegrees, SpreadFireBump, SpreadDecreaseSpeed. Enables complete weapon definition from YAML.
- v3.3 - NPCDefinition, EquippableItem & Activity Enhancement: NPCDefinition gains full CharacterDefinition property support (Dialogue, TaggedDialogueSet, vendor properties, inherited properties). EquippableItem gains full NarrativeItem property support (DisplayName, Description, AttackRating, ArmorRating, StealthRating, Weight, BaseValue, BaseScore, ItemTags, bStackable, MaxStackSize, UseRechargeDuration, Thumbnail). Activity gains full NarrativeActivityBase/NPCActivity property support (ActivityName, OwnedTags, BlockTags, RequireTags, SupportedGoalType, bIsInterruptable, bSaveActivity). EI_, NPCDef_, and BPA_ upgraded to High automation level.
- v3.2 - NE_ & DBP_ Enhancements: NarrativeEvent now sets EventRuntime/EventFilter/PartyEventPolicy/bRefireOnLoad via reflection, DialogueBlueprint sets bFreeMovement/bUnskippable/bCanBeExited/bShowCinematicBars/bAutoRotateSpeakers/bAutoStopMovement/Priority/EndDialogueDist via reflection, both types upgraded from Stub to Medium automation level
- v3.1.1 - Robustness Fixes: Commandlet exit code returns non-zero on failures (CI/CD support), dedicated LogGasAbilityGenerator log category, try/catch for YAML parsing exceptions, UGeneratorMetadataRegistry fallback for UDataAsset/UBlueprint/UNiagaraSystem (which don't support IInterface_AssetUserData in UE5.7)
- v3.1 - TSubclassOf Resolution & BT Node Trees: AbilityConfiguration now populates DefaultAbilities/StartupEffects/DefaultAttributes via LoadClass<>, ActivityConfiguration populates DefaultActivities/GoalGenerators, BehaviorTree creates root composite node (Selector/Sequence) and populates Children with tasks/decorators/services
- v3.0 - Regen/Diff Safety System: Per-asset metadata via UGeneratorAssetMetadata (UAssetUserData), input hash (manifest definition) + output hash (asset content) change detection, --dryrun preview mode, --force conflict override, universal SkipIfModified policy for all 25 generators, ComputeDataAssetOutputHash for 17 DataAsset types, ComputeBlueprintOutputHash for 9 Blueprint types
- v2.9.1 - FX Validation System: Template integrity validation, descriptor-to-system validation, regeneration safety with metadata tracking and descriptor hashing
- v2.9.0 - Data-driven FX architecture: FManifestFXDescriptor for Niagara User param binding, template duplication workflow
- v2.8.4 - Whitelist-based verification system with duplicate detection for fresh generations
- v2.8.3 - Function override support for event graphs (e.g., ReceiveTick override)
- v2.8.2 - CallFunction parameter defaults with enum conversion (e.g., SetMovementMode NewMovementMode: Flying)
- v2.8.1 - NPC event_graphs with descriptive messages and Self node fix
- v2.8.0 - Flying NPC event_graphs for BP_WardenCore and BP_PossessedExploder
- v2.7.8 - Self node support for event graphs
- v2.7.7 - Pre-generation validation for event graph definitions
- v2.7.6 - Inline event graph support for actor blueprints
- v2.7.0 - BreakStruct, MakeArray, GetArrayItem node support for weapon form implementation
- v2.6.14 - Prefix validation for all asset types
- v2.6.12 - Material expression graph support, Material Function generator
- v2.6.11 - Force scan NarrativePro plugin content for Blueprint parent class resolution in commandlet mode
- v2.6.7 - Deferred asset retry mechanism for dependency resolution
- v2.6.6 - GE assets created as Blueprints for CooldownGameplayEffectClass compatibility
- v2.6.5 - Niagara System generator
- v2.6.3 - Tags configured on existing GA assets during SKIP
- v2.6.2 - Gameplay ability tag/policy configuration via reflection
- v2.6.0 - Item collections with quantities, reflection for protected members
- v2.5.7 - TaggedDialogueSet generator
- v2.5.0 - Renamed to GasAbilityGenerator, FManifest* prefix convention
- v2.4.0 - Inline event graph and variables support for gameplay abilities
- v2.3.0 - 12 new asset type generators with dependency-based generation order
- v2.2.0 - Event graph generation (Blueprint nodes and connections from YAML)
- v2.1.9 - Manifest validation (whitelist enforcement)
- v2.1.8 - Enumeration generation, enum variable type fix
